<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KÃ¼tahya YeÅŸilay | CANLI BULUT SÄ°STEMÄ°</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800;900&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <style>
        :root { --yesil: #006a33; --sari: #f1c40f; --dark: #121212; --light: #f8faf9; }
        body { margin: 0; font-family: 'Poppins', sans-serif; background: var(--light); color: #333; overflow-x: hidden; }
        header { background: linear-gradient(135deg, var(--yesil) 0%, #004d26 100%); color: white; padding: 25px 5%; text-align: center; border-bottom: 6px solid var(--sari); }
        nav { display: flex; justify-content: center; flex-wrap: wrap; gap: 15px; padding: 15px; background: #003d1d; position: sticky; top: 0; z-index: 1000; }
        nav a { color: white; text-decoration: none; font-weight: 700; font-size: 0.85rem; cursor: pointer; text-transform: uppercase; }
        .admin-trigger { background: var(--sari); color: var(--yesil) !important; padding: 8px 15px; border-radius: 8px; font-weight: 900; border: none; cursor: pointer; }
        .page { display: none; padding: 30px 5%; }
        .page.active { display: block; }
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        @media (min-width: 1024px) { .grid { grid-template-columns: repeat(5, 1fr); gap: 25px; } }
        .card { background: white; padding: 25px 15px; border-radius: 20px; text-align: center; border-bottom: 6px solid var(--yesil); box-shadow: 0 5px 15px rgba(0,0,0,0.05); cursor: pointer; }
        .card img { width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 4px solid var(--yesil); margin-bottom: 15px; }
        #admin-panel { display: none; position: fixed; inset: 0; background: white; z-index: 9999; flex-direction: column; }
        .admin-nav { background: var(--dark); color: white; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 5px solid var(--sari); }
        .admin-sidebar { background: #1a1a1a; padding: 15px; display: flex; overflow-x: auto; gap: 10px; }
        @media (min-width: 1024px) { .admin-sidebar { width: 280px; flex-direction: column; overflow-x: visible; padding: 20px; } }
        .sidebar-btn { color: #aaa; padding: 15px; cursor: pointer; border-radius: 12px; font-weight: 700; }
        .sidebar-btn.active { background: var(--yesil); color: white; }
        .admin-main { flex: 1; padding: 25px; overflow-y: auto; background: #f4f6f5; }
        .admin-card { background: white; padding: 20px; border-radius: 15px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #eee; }
        .btn-green { background: var(--yesil); color: white; padding: 15px; border-radius: 10px; border: none; font-weight: 800; cursor: pointer; width: 100%; margin-bottom: 20px; }
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box; font-family: inherit; }
        #status-light { width: 10px; height: 10px; border-radius: 50%; background: red; display: inline-block; margin-right: 5px; }
    </style>
</head>
<body>

<header><h1>KÃ¼tahya YeÅŸilay Futbol Okulu</h1></header>

<nav>
    <a onclick="showPage('home')">ANASAYFA</a>
    <a onclick="showPage('groups')">GRUPLAR</a>
    <a onclick="showPage('coaches')">HOCALAR</a>
    <button class="admin-trigger" onclick="adminGiris()">ADMÄ°N PANELÄ°</button>
</nav>

<div id="page-home" class="page active">
    <div style="background:white; padding:30px; border-radius:25px; border-top:10px solid var(--sari);">
        <h3 style="color:var(--yesil); margin-top:0;">ðŸ“¢ DUYURULAR</h3>
        <div id="public-anns">Bulut verileri yÃ¼kleniyor...</div>
    </div>
</div>

<div id="page-groups" class="page"><h2 style="color:var(--yesil); font-weight:900;">GRUPLARIMIZ</h2><div id="public-groups" class="grid"></div></div>
<div id="page-coaches" class="page"><h2 style="color:var(--yesil); font-weight:900;">TEKNÄ°K KADRO</h2><div id="public-coaches" class="grid"></div></div>

<div id="admin-panel">
    <div class="admin-nav"><span><div id="status-light"></div><b>CANLI BULUT PANELÄ°</b></span> <button onclick="location.reload()" style="background:red; color:white; border:none; padding:8px 15px; border-radius:8px; cursor:pointer;">Ã‡IKIÅž</button></div>
    <div class="admin-layout">
        <div class="admin-sidebar">
            <div class="sidebar-btn active" onclick="adminTab('groups', this)">âš½ GRUP YÃ–NETÄ°MÄ°</div>
            <div class="sidebar-btn" onclick="adminTab('coaches', this)">ðŸ‘¤ HOCA YÃ–NETÄ°MÄ°</div>
            <div class="sidebar-btn" onclick="adminTab('anns', this)">ðŸ“¢ DUYURU YÃ–NETÄ°MÄ°</div>
        </div>
        <div class="admin-main" id="admin-view-content">BaÄŸlanÄ±yor...</div>
    </div>
</div>

<script>
    // --- SENÄ°N OLUÅžTURDUÄžUN LÄ°NK ---
    const firebaseConfig = {
        databaseURL: "https://yesilay-futbol-okulu-default-rtdb.firebaseio.com/" 
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    let db = {};

    // VERÄ°LERÄ° OTOMATÄ°K DÄ°NLE (Senkronizasyonun kalbi)
    database.ref('/').on('value', (snapshot) => {
        db = snapshot.val() || { gruplar: [], hocalar: [], duyurular: [] };
        renderAll();
        document.getElementById('status-light').style.background = "#2ecc71";
    });

    function pushDB() { database.ref('/').set(db); }

    function renderAll() {
        const aList = document.getElementById('public-anns');
        aList.innerHTML = (db.duyurular || []).length ? "" : "HenÃ¼z duyuru yok.";
        (db.duyurular || []).forEach(a => { aList.innerHTML += `<div style="padding:15px; border-left:5px solid var(--yesil); margin-bottom:10px; background:#f9f9f9;"><b>${a.baslik}</b><p>${a.metin}</p></div>`; });

        const gGrid = document.getElementById('public-groups');
        gGrid.innerHTML = "";
        (db.gruplar || []).forEach(g => { gGrid.innerHTML += `<div class="card"><h3>${g.ad}</h3></div>`; });

        const hGrid = document.getElementById('public-coaches');
        hGrid.innerHTML = "";
        (db.hocalar || []).forEach(h => { hGrid.innerHTML += `<div class="card"><h3>${h.ad}</h3></div>`; });
    }

    function adminTab(tab, btn) {
        document.querySelectorAll('.sidebar-btn').forEach(b => b.classList.remove('active')); btn.classList.add('active');
        const view = document.getElementById('admin-view-content'); view.innerHTML = "";
        if(tab === 'groups') { view.innerHTML = `<button class="btn-green" onclick="addG()">+ Yeni Grup Ekle</button>`; (db.gruplar || []).forEach(g => { view.innerHTML += `<div class="admin-card"><b>${g.ad}</b><button onclick="del('gruplar', ${g.id})" style="color:red; border:none; background:none; cursor:pointer; font-weight:bold;">Sil</button></div>`; }); }
        else if(tab === 'coaches') { view.innerHTML = `<button class="btn-green" onclick="addC()">+ Yeni Hoca Ekle</button>`; (db.hocalar || []).forEach(h => { view.innerHTML += `<div class="admin-card"><b>${h.ad}</b><button onclick="del('hocalar', ${h.id})" style="color:red; border:none; background:none; cursor:pointer; font-weight:bold;">Sil</button></div>`; }); }
        else if(tab === 'anns') { view.innerHTML = `<button class="btn-green" onclick="addA()">+ Yeni Duyuru</button>`; (db.duyurular || []).forEach(a => { view.innerHTML += `<div class="admin-card"><b>${a.baslik}</b><button onclick="del('duyurular', ${a.id})" style="color:red; border:none; background:none; cursor:pointer; font-weight:bold;">Sil</button></div>`; }); }
    }

    function addG() { const n=prompt("Grup AdÄ±:"); if(n) { if(!db.gruplar) db.gruplar=[]; db.gruplar.push({id:Date.now(), ad:n}); pushDB(); } }
    function addC() { const n=prompt("Hoca AdÄ±:"); if(n) { if(!db.hocalar) db.hocalar=[]; db.hocalar.push({id:Date.now(), ad:n}); pushDB(); } }
    function addA() { const b=prompt("Duyuru BaÅŸlÄ±ÄŸÄ±:"), m=prompt("Mesaj:"); if(b&&m) { if(!db.duyurular) db.duyurular=[]; db.duyurular.unshift({id:Date.now(), baslik:b, metin:m}); pushDB(); } }
    function del(path, id) { if(confirm("Silinsin mi?")) { db[path] = db[path].filter(x => x.id !== id); pushDB(); adminTab(path, document.querySelector('.active')); } }
    function showPage(p) { document.querySelectorAll('.page').forEach(pg => pg.classList.remove('active')); document.getElementById('page-' + p).classList.add('active'); }
    function adminGiris() { if(prompt("Åžifre:") === "ALÄ°43") document.getElementById('admin-panel').style.display='flex'; }
</script>

</body>
</html>
