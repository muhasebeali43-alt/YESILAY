<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KÃ¼tahya YeÅŸilay SK - Premium YÃ¶netim Sistemi</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        * { box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background-color: #f0f4f8; margin: 0; padding: 0; color: #333; }
        
        /* Ãœst MenÃ¼ */
        header { 
            background: #ffffff; padding: 15px 5%; 
            display: flex; justify-content: space-between; align-items: center; 
            border-bottom: 3px solid #008f39; box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            position: sticky; top: 0; z-index: 1000;
        }
        .logo { display: flex; align-items: center; gap: 10px; font-size: 22px; font-weight: 700; color: #006400; }
        
        .btn { padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 15px; transition: 0.2s; }
        .btn-primary { background-color: #008f39; color: white; }
        .btn-primary:hover { background-color: #006400; transform: translateY(-2px); }
        .btn-danger { background-color: #ef4444; color: white; }
        
        /* Dinamik Navigasyon MenÃ¼sÃ¼ */
        nav { background-color: #006400; display: flex; justify-content: center; flex-wrap: wrap; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .dropdown { position: relative; display: inline-block; }
        .dropbtn { background-color: transparent; color: white; padding: 15px 20px; font-size: 15px; border: none; cursor: pointer; font-weight: 600; transition: 0.3s; }
        .dropdown:hover .dropbtn { background-color: #008f39; }
        .dropdown-content { display: none; position: absolute; background-color: #ffffff; min-width: 220px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); z-index: 100; border-radius: 0 0 8px 8px; overflow: hidden; max-height: 400px; overflow-y: auto; }
        .dropdown-content a { color: #333; padding: 12px 16px; text-decoration: none; display: block; border-bottom: 1px solid #eee; font-size: 14px; transition: 0.2s; cursor: pointer; }
        .dropdown-content a:hover { background-color: #f4f9f4; color: #008f39; padding-left: 20px; font-weight: bold; }
        .dropdown:hover .dropdown-content { display: block; }

        /* GÃ¶vde ve Ä°Ã§erik */
        .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
        #login-view, #admin-view { display: none; background: white; padding: 40px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); max-width: 800px; margin: 50px auto; }
        
        .section-title { color: #008f39; border-bottom: 3px solid #008f39; padding-bottom: 10px; display: inline-block; margin-bottom: 20px; }
        
        /* Grid Kart Sistemi */
        #post-feed { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 30px; }
        .post-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.06); transition: 0.3s; border: 1px solid #f0f0f0; display: flex; flex-direction: column; }
        .post-card:hover { transform: translateY(-5px); box-shadow: 0 12px 25px rgba(0,0,0,0.12); }
        .post-img { width: 100%; height: 250px; object-fit: cover; }
        .post-content { padding: 20px; flex-grow: 1; }
        .post-badge { display: inline-block; background: rgba(0, 143, 57, 0.1); color: #008f39; padding: 6px 12px; border-radius: 6px; font-size: 13px; font-weight: 700; margin-bottom: 10px; }
        
        /* Formlar */
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-group label { display: block; font-weight: 600; font-size: 14px; margin-bottom: 8px; color: #2d3748; }
        input, select, textarea { width: 100%; padding: 14px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 15px; background: #f8fafc; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #008f39; background: white; }
        
        .admin-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        @media (max-width: 768px) { .admin-grid { grid-template-columns: 1fr; } }
        
        .admin-box { background: #f4f9f4; padding: 25px; border-radius: 12px; border: 1px solid #c3e6cb; }
    </style>
</head>
<body>

    <header>
        <div class="logo">âš½ KÃ¼tahya YeÅŸilay SK</div>
        <div>
            <button id="loginBtn" class="btn btn-primary" onclick="showLogin()">YÃ¶netici GiriÅŸi</button>
            <button id="logoutBtn" class="btn btn-danger" style="display:none;" onclick="logout()">GÃ¼venli Ã‡Ä±kÄ±ÅŸ</button>
        </div>
    </header>

    <nav id="dynamic-nav">
        </nav>

    <div id="public-view" class="container">
        <h2 class="section-title" id="current-category">ğŸ“¸ TÃ¼m PaylaÅŸÄ±mlar</h2>
        <div id="post-feed"></div>
    </div>

    <div id="login-view">
        <h2 style="color: #006400; text-align: center; margin-top:0;">Sistem GiriÅŸi</h2>
        <div class="form-group"><label>KullanÄ±cÄ± AdÄ±</label><input type="text" id="username" placeholder="ALÄ°"></div>
        <div class="form-group"><label>Åifre</label><input type="password" id="password" placeholder="ALÄ°43"></div>
        <button class="btn btn-primary" style="width: 100%;" onclick="login()">GiriÅŸ Yap</button>
        <button class="btn" style="width: 100%; background:#e2e8f0; margin-top: 10px;" onclick="showPublic()">Ä°ptal</button>
        <div id="error-msg" style="color: red; text-align: center; margin-top: 15px; display: none; font-weight: bold;">HatalÄ± ÅŸifre!</div>
    </div>

    <div id="admin-view">
        <h2 style="color: #006400; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-top:0;">âš™ï¸ YÃ¶netici Paneli <span style="font-size:14px; background:#008f39; color:white; padding:5px 10px; border-radius:20px; float:right;">Yetkili: ALÄ°</span></h2>
        
        <div class="admin-grid">
            <div class="admin-box">
                <h3 style="margin-top:0; color:#006400;">ğŸ“¸ Yeni FotoÄŸraf/Ä°Ã§erik YÃ¼kle</h3>
                <div class="form-group">
                    <label>Hangi Gruba YÃ¼klenecek?</label>
                    <select id="group-select">
                        </select>
                </div>
                <div class="form-group">
                    <label>AÃ§Ä±klama</label>
                    <textarea id="post-text" rows="3" placeholder="Ã–rn: BugÃ¼n harika bir antrenman yaptÄ±k..."></textarea>
                </div>
                <button class="btn btn-primary" style="width: 100%;" onclick="addPost()">âœ… SeÃ§ili Gruba YayÄ±nla</button>
            </div>

            <div class="admin-box" style="background: #fff8e1; border-color: #ffeeba;">
                <h3 style="margin-top:0; color:#856404;">â• Yeni Grup Ekle</h3>
                <p style="font-size: 13px; color: #666; margin-top:-10px;">Sistemde olmayan yeni bir takÄ±mÄ± buradan oluÅŸturabilirsiniz.</p>
                <div class="form-group">
                    <label>Hangi Ana BaÅŸlÄ±ÄŸÄ±n AltÄ±na Eklensin?</label>
                    <select id="new-group-parent">
                        <option value="FUTBOL OKULU GRUPLARI">Futbol Okulu GruplarÄ±</option>
                        <option value="GELÄ°ÅÄ°M GRUPLARI">GeliÅŸim GruplarÄ±</option>
                        <option value="ANA GRUPLAR">Ana Gruplar</option>
                        <option value="AKADEMÄ° GRUPLARI">Akademi GruplarÄ±</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Yeni Grubun AdÄ±</label>
                    <input type="text" id="new-group-name" placeholder="Ã–rn: U-13 Akademi">
                </div>
                <button class="btn" style="width: 100%; background:#ffc107; color:#000;" onclick="addNewGroup()">TakÄ±mÄ± Sisteme Ekle</button>
            </div>
        </div>
    </div>

    <script>
        // 1. DÄ°NAMÄ°K KATEGORÄ° SÄ°STEMÄ° (BaÅŸlangÄ±Ã§ Verileri)
        const defaultCategories = {
            "FUTBOL OKULU GRUPLARI": ["U-6 Futbol Okulu", "U-7 Futbol Okulu", "U-8 Futbol Okulu", "U-9 Futbol Okulu", "U-10 Futbol Okulu"],
            "GELÄ°ÅÄ°M GRUPLARI": ["U-9 GeliÅŸim", "U-10 GeliÅŸim", "U-11 GeliÅŸim", "U-12 GeliÅŸim", "Ã–zel Ä°dman Grubu"],
            "ANA GRUPLAR": ["A TakÄ±m", "U-19 Ana Grup", "U-17 Ana Grup", "U-16 Ana Grup", "Trabzonspor KampÄ±"],
            "AKADEMÄ° GRUPLARI": ["U-14 Akademi", "U-15 Akademi", "Kaleci Akademisi", "Atletik Performans"]
        };

        // HafÄ±zadan kategorileri Ã§ek, yoksa varsayÄ±lanÄ± kullan
        let categories = JSON.parse(localStorage.getItem('yesilay_categories')) || defaultCategories;

        // 2. Ä°Ã‡ERÄ°K (POST) SÄ°STEMÄ°
        const defaultPosts = [
            { group: "Trabzonspor KampÄ±", text: "OÄŸuz Akalan hocamÄ±z kontrolÃ¼nde Ã‡aÄŸatay Kavak ve ekibinin Trabzonspor kampÄ± hazÄ±rlÄ±klarÄ± neÅŸeyle devam ediyor.", img: "https://images.pexels.com/photos/3621104/pexels-photo-3621104.jpeg?auto=compress&cs=tinysrgb&w=800" },
            { group: "U-12 GeliÅŸim", text: "GeliÅŸim grubumuz pas ve taktik Ã§alÄ±ÅŸmasÄ±nda. Harika bir iÅŸ Ã§Ä±kardÄ±lar!", img: "https://images.pexels.com/photos/50713/pexels-photo-50713.jpeg?auto=compress&cs=tinysrgb&w=800" },
            { group: "U-10 Futbol Okulu", text: "Miniklerimiz sahadaki enerjileriyle herkesi bÃ¼yÃ¼ledi.", img: "https://images.pexels.com/photos/18473151/pexels-photo-18473151.jpeg?auto=compress&cs=tinysrgb&w=800" }
        ];

        let posts = JSON.parse(localStorage.getItem('yesilay_posts')) || defaultPosts;
        let currentFilter = "TÃ¼mÃ¼";

        // --- ARAYÃœZÃœ Ã‡Ä°ZÄ°CÄ° FONKSÄ°YONLAR ---

        // MenÃ¼yÃ¼ Dinamik Olarak OluÅŸturur
        function renderMenu() {
            const nav = document.getElementById('dynamic-nav');
            let navHTML = `<div class="dropdown"><button class="dropbtn" onclick="filterPosts('TÃ¼mÃ¼')">TÃœM PAYLAÅIMLAR</button></div>`;
            
            for (const [parent, groups] of Object.entries(categories)) {
                navHTML += `<div class="dropdown"><button class="dropbtn">${parent} â–¼</button><div class="dropdown-content">`;
                groups.forEach(group => {
                    navHTML += `<a onclick="filterPosts('${group}')">${group}</a>`;
                });
                navHTML += `</div></div>`;
            }
            nav.innerHTML = navHTML;
        }

        // YÃ¶netici Panelindeki SeÃ§im Kutusunu Dinamik Olarak OluÅŸturur
        function renderAdminSelect() {
            const select = document.getElementById('group-select');
            let selectHTML = '';
            
            for (const [parent, groups] of Object.entries(categories)) {
                selectHTML += `<optgroup label="${parent}">`;
                groups.forEach(group => {
                    selectHTML += `<option value="${group}">${group}</option>`;
                });
                selectHTML += `</optgroup>`;
            }
            select.innerHTML = selectHTML;
        }

        // GÃ¶nderileri Ekrana Ã‡izer
        function renderPosts() {
            const feed = document.getElementById('post-feed');
            feed.innerHTML = '';
            
            let filteredPosts = currentFilter === "TÃ¼mÃ¼" ? posts : posts.filter(post => post.group === currentFilter);

            if (filteredPosts.length === 0) {
                feed.innerHTML = `<div style="grid-column: 1 / -1; text-align:center; padding:40px; background:white; border-radius:12px;">Bu grupta henÃ¼z iÃ§erik yok. YÃ¶netici panelinden ekleyebilirsiniz.</div>`;
            }

            // En yeniler en Ã¼stte Ã§Ä±ksÄ±n diye ters Ã§evirerek (reverse) ekliyoruz
            [...filteredPosts].reverse().forEach(post => {
                feed.innerHTML += `
                    <div class="post-card">
                        <img src="${post.img}" class="post-img" alt="Antrenman">
                        <div class="post-content">
                            <div class="post-badge">${post.group}</div>
                            <p style="margin:0; font-size:15px; color:#444;">${post.text}</p>
                        </div>
                    </div>
                `;
            });
        }

        // --- Ä°ÅLEM FONKSÄ°YONLARI ---

        // Yeni Grup Ekleme Fonksiyonu
        function addNewGroup() {
            let parent = document.getElementById('new-group-parent').value;
            let groupName = document.getElementById('new-group-name').value.trim();
            
            if(groupName === "") { alert("LÃ¼tfen yeni grubun adÄ±nÄ± yazÄ±n!"); return; }
            if(categories[parent].includes(groupName)) { alert("Bu grup zaten var!"); return; }

            // Veriyi ekle ve hafÄ±zaya kaydet
            categories[parent].push(groupName);
            localStorage.setItem('yesilay_categories', JSON.stringify(categories));
            
            // ArayÃ¼zÃ¼ gÃ¼ncelle
            renderMenu();
            renderAdminSelect();
            document.getElementById('new-group-name').value = '';
            
            alert(`âœ… Harika! "${groupName}" sistemi baÅŸarÄ±yla eklendi. ArtÄ±k bu gruba fotoÄŸraf yÃ¼kleyebilirsiniz.`);
        }

        // Yeni FotoÄŸraf Ekleme Fonksiyonu
        function addPost() {
            let group = document.getElementById('group-select').value;
            let text = document.getElementById('post-text').value;
            if(text === "") { alert("LÃ¼tfen bir aÃ§Ä±klama yazÄ±n!"); return; }
            
            // Yeni yÃ¼klenen fotoÄŸraflar iÃ§in sistemden rastgele bir Ã§ocuk futbol resmi
            const randomImages = [
                "https://images.pexels.com/photos/114296/pexels-photo-114296.jpeg?auto=compress&cs=tinysrgb&w=800",
                "https://images.pexels.com/photos/274422/pexels-photo-274422.jpeg?auto=compress&cs=tinysrgb&w=800",
                "https://images.pexels.com/photos/1618269/pexels-photo-1618269.jpeg?auto=compress&cs=tinysrgb&w=800"
            ];
            let img = randomImages[Math.floor(Math.random() * randomImages.length)];
            
            posts.push({ group: group, text: text, img: img });
            localStorage.setItem('yesilay_posts', JSON.stringify(posts)); // HafÄ±zaya kaydet
            
            document.getElementById('post-text').value = ''; 
            showPublic(); 
            filterPosts(group);
        }

        function filterPosts(groupName) {
            currentFilter = groupName;
            document.getElementById('current-category').innerText = groupName === "TÃ¼mÃ¼" ? "ğŸ“¸ TÃ¼m PaylaÅŸÄ±mlar" : "ğŸ“¸ " + groupName + " PaylaÅŸÄ±mlarÄ±";
            showPublic(); 
            renderPosts();
        }

        // --- GÄ°RÄ°Å / Ã‡IKIÅ VE SAYFA GEÃ‡Ä°ÅLERÄ° ---
        function showLogin() { hideAll(); document.getElementById('login-view').style.display = 'block'; window.scrollTo(0,0); }
        function showPublic() { hideAll(); document.getElementById('public-view').style.display = 'block'; window.scrollTo(0,0); }
        function showAdmin() { hideAll(); document.getElementById('admin-view').style.display = 'block'; window.scrollTo(0,0); }
        function hideAll() { document.getElementById('public-view').style.display='none'; document.getElementById('login-view').style.display='none'; document.getElementById('admin-view').style.display='none'; document.getElementById('error-msg').style.display='none'; }

        function login() {
            let user = document.getElementById('username').value.toUpperCase().trim();
            let pass = document.getElementById('password').value.toUpperCase().trim();
            if((user === 'ALÄ°' || user === 'ALI') && (pass === 'ALÄ°43' || pass === 'ALI43')) {
                document.getElementById('loginBtn').style.display = 'none'; document.getElementById('logoutBtn').style.display = 'block'; showAdmin();
            } else { document.getElementById('error-msg').style.display = 'block'; }
        }

        function logout() {
            document.getElementById('username').value = ''; document.getElementById('password').value = '';
            document.getElementById('loginBtn').style.display = 'block'; document.getElementById('logoutBtn').style.display = 'none';
            filterPosts('TÃ¼mÃ¼'); 
        }

        // SAYFA YÃœKLENDÄ°ÄÄ°NDE Ã‡ALIÅTIRILACAKLAR
        renderMenu();
        renderAdminSelect();
        renderPosts();
    </script>
</body>
</html>
